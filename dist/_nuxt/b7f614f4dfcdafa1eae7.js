(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{301:function(t,e,n){var content=n(317);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("164dcf43",content,!0,{sourceMap:!1})},302:function(t,e,n){var content=n(319);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("5c7ac000",content,!0,{sourceMap:!1})},315:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgCgl4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIAoJeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIAoJdmVyc2lvbj0iMS4xIiAKCWlkPSJDYXBhXzEiIAoJeD0iMHB4IiAKCXk9IjBweCIgCgl3aWR0aD0iNTEycHgiIAoJaGVpZ2h0PSI1MTJweCIgCgl2aWV3Qm94PSIwIDAgNDg0LjUgNDg0LjUiIAoJc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg0LjUgNDg0LjU7IiAKCXhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiCj4KCTxnPgoJCTxnPgoJCQk8ZyBpZD0ibWljIj4KCQkJCTxwYXRoIAoJCQkJCWQ9Ik0yNDIuMjUsMzA2YzQzLjM1LDAsNzYuNS0zMy4xNSw3Ni41LTc2LjV2LTE1M2MwLTQzLjM1LTMzLjE1LTc2LjUtNzYuNS03Ni41Yy00My4zNSwwLTc2LjUsMzMuMTUtNzYuNSw3Ni41djE1MyAgICBDMTY1Ljc1LDI3Mi44NSwxOTguOSwzMDYsMjQyLjI1LDMwNnogTTM3Ny40LDIyOS41YzAsNzYuNS02My43NSwxMzAuMDUtMTM1LjE1LDEzMC4wNWMtNzEuNCwwLTEzNS4xNS01My41NS0xMzUuMTUtMTMwLjA1SDYzLjc1ICAgIGMwLDg2LjcsNjguODUsMTU4LjEsMTUzLDE3MC44NXY4NC4xNWg1MXYtODQuMTVjODQuMTUtMTIuNzUsMTUzLTg0LjE0OSwxNTMtMTcwLjg1SDM3Ny40TDM3Ny40LDIyOS41eiIgCgkJCQkJZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgCgkJCQkJY2xhc3M9ImFjdGl2ZS1wYXRoIiAKCQkJCQlkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCIgCgkJCQkJZmlsbD0iI0ZBRkFGOCIKCQkJCS8+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+IAo8L3N2Zz4K"},316:function(t,e,n){"use strict";var r=n(301);n.n(r).a},317:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".icon--microphone[data-v-20b24deb]{width:10rem}",""])},318:function(t,e,n){"use strict";var r=n(302);n.n(r).a},319:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".record__button__wrapper[data-v-553fe863]{width:100%;display:flex;justify-content:center;align-items:center}.record__button--outside[data-v-553fe863]{width:10rem;height:10rem;background-color:#fafcff}.record__button--inside[data-v-553fe863],.record__button--outside[data-v-553fe863]{display:flex;justify-content:center;align-items:center;border-radius:50%}.record__button--inside[data-v-553fe863]{width:5rem;height:5rem;background-color:#ff7989}.icon_microphone[data-v-553fe863]{padding-top:.5rem}.icon_microphone[data-v-553fe863] .icon--microphone{width:3rem}.active[data-v-553fe863]{background-color:#fafcff;border:.4rem solid #2f7db3}.icon_square[data-v-553fe863]{width:2rem;height:2rem;background-color:#2f7db3}",""])},320:function(t,e,n){"use strict";n(29);var r,o,c,d={startRecording:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){var e=new(window.AudioContext||window.webkitAudioContext)({sampleRate:22e3});o=t,c=e.createMediaStreamSource(t),(r=new WebAudioRecorder(c,{workerDir:"/record/",encoding:"mp3",numChannels:2})).setOptions({timeLimit:1200,mp3:{bitRate:192},encodeAfterRecord:!0}),r.startRecording()}).catch(function(t){console.error(t)})},stopRecording:function(){return new Promise(function(t){o.getAudioTracks()[0].stop(),r.finishRecording(),r.onComplete=function(e,n){t(n)}})}};e.a=d},322:function(t,e,n){var content=n(349);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("5e4e3e8b",content,!0,{sourceMap:!1})},331:function(t,e,n){"use strict";var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon_microphone__components"},[e("img",{staticClass:"icon--microphone",attrs:{src:n(315),alt:"icon-microphone"}})])}],o=(n(316),n(0)),c={components:{IconMicrophone:Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},r,!1,null,"20b24deb",null).exports},props:{isActive:{type:Boolean}},methods:{handleButtonClick:function(){this.$emit("buttonClick")}}},d=(n(318),Object(o.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"record__button__wrapper",on:{click:this.handleButtonClick}},[e("div",{staticClass:"record__button--outside"},[e("div",{staticClass:"record__button--inside",class:{active:this.isActive}},[this.isActive?this._e():e("icon-microphone",{staticClass:"icon_microphone"}),this._v(" "),this.isActive?e("div",[e("div",{staticClass:"icon_square"})]):this._e()],1)])])},[],!1,null,"553fe863",null));e.a=d.exports},333:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},348:function(t,e,n){"use strict";var r=n(322);n.n(r).a},349:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".record__container[data-v-2b214682]{width:100%;height:100vh;display:flex;text-align:center;flex-direction:column;align-content:center;justify-content:center;background-color:#707070}.record__timer[data-v-2b214682]{font-family:Unica One;font-size:3.5rem;color:#fafcff}.record__button--active[data-v-2b214682]{background-color:#2f7db3}",""])},378:function(t,e,n){"use strict";n.r(e);n(149),n(150),n(29);var r=n(333),o=(n(28),n(7)),c=n(9),d=n(17),l=n(331),f=n(320),h=n(25),m=d.a.storage().ref("audio"),v={head:function(){return{script:[{src:"/record/WebAudioRecorder.min.js"}]}},components:{RecordButton:l.a},filters:{zeroPadding:function(time){return("0"+time).slice(-2)}},data:function(){return{isActiveRecord:!1,rawAudioData:null,previewAudioData:null,timerId:null,min:0,sec:0}},methods:Object(c.a)({},Object(h.b)("post",["addPostId","addAudioUrl"]),{handleRecord:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isActiveRecord){t.next=9;break}return this.isActiveRecord=!1,clearInterval(this.timerId),t.next=5,this.stopRecording();case 5:return t.next=7,this.uploadAudioData(this.rawAudioData);case 7:return this.$router.push("/posts/new"),t.abrupt("return");case 9:return t.next=11,this.startRecording();case 11:this.isActiveRecord=!0,this.updateTimer();case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateTimer:function(){var t=this;this.timerId=setInterval(function(){t.sec++,t.sec>=60&&(t.min++,t.sec=0)},1e3)},startRecording:function(){f.a.startRecording()},stopRecording:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.stopRecording();case 2:e=t.sent,this.rawAudioData=e,n=URL.createObjectURL(e),this.previewAudioData=n;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createId:function(){return Object(r.a)(Array(2)).reduce(function(t){return t+Math.random().toString(32).slice(-6).toString()},"")},uploadAudioData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(data){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.createId(),n=m.child(e),t.next=4,n.put(data).then(function(t){console.log("added firebase storage: ".concat(t.state,"!!"))});case 4:return t.next=6,n.getDownloadURL().then(function(t){r.addPostId(e),r.addAudioUrl(t)});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},w=(n(348),n(0)),component=Object(w.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"record__container",class:{"record__button--active":t.isActiveRecord}},[n("div",{staticClass:"record__timer"},[t._v("\n    "+t._s(t._f("zeroPadding")(t.min))+":"+t._s(t._f("zeroPadding")(t.sec))+"\n  ")]),t._v(" "),n("record-button",{attrs:{"is-active":t.isActiveRecord},on:{buttonClick:t.handleRecord}})],1)},[],!1,null,"2b214682",null);e.default=component.exports}}]);