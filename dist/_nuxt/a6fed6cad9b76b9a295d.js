(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{396:function(t,e,n){var content=n(413);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("19275cfa",content,!0,{sourceMap:!1})},404:function(t,e,n){var content=n(430);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("164dcf43",content,!0,{sourceMap:!1})},405:function(t,e,n){var content=n(432);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("5c7ac000",content,!0,{sourceMap:!1})},412:function(t,e,n){"use strict";var r=n(396);n.n(r).a},413:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".icon--loading[data-v-703e6494]{width:6rem;fill:#269edd;z-index:2}",""])},416:function(t,e,n){"use strict";n(412);var r=n(0),component=Object(r.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"icon--loading",staticStyle:{"enable-background":"new 0 0 16 16"},attrs:{id:"Layer_1",height:"16px",version:"1.1",viewBox:"0 0 16 16",width:"16px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("path",{attrs:{d:"M8,0C7.448,0,7,0.448,7,1v2c0,0.552,0.448,1,1,1s1-0.448,1-1V1C9,0.448,8.552,0,8,0z M8,12c-0.552,0-1,0.447-1,1v2  c0,0.553,0.448,1,1,1s1-0.447,1-1v-2C9,12.447,8.552,12,8,12z M12.242,5.172l1.414-1.415c0.391-0.39,0.391-1.024,0-1.414  c-0.39-0.391-1.023-0.391-1.414,0l-1.414,1.414c-0.391,0.391-0.391,1.024,0,1.415C11.219,5.562,11.852,5.562,12.242,5.172z   M3.757,10.828l-1.414,1.414c-0.391,0.391-0.391,1.024,0,1.414c0.39,0.391,1.023,0.391,1.414,0l1.414-1.414  c0.391-0.391,0.391-1.023,0-1.414C4.781,10.438,4.148,10.438,3.757,10.828z M3.757,2.343c-0.391-0.391-1.024-0.391-1.414,0  c-0.391,0.39-0.391,1.024,0,1.414l1.414,1.415c0.391,0.39,1.024,0.39,1.414,0c0.391-0.391,0.391-1.024,0-1.415L3.757,2.343z   M12.242,10.828c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414l1.414,1.414c0.391,0.391,1.024,0.391,1.414,0  c0.391-0.39,0.391-1.023,0-1.414L12.242,10.828z M15,7h-2c-0.553,0-1,0.448-1,1s0.447,1,1,1h2c0.553,0,1-0.448,1-1S15.553,7,15,7z   M4,8c0-0.552-0.448-1-1-1H1C0.448,7,0,7.448,0,8s0.448,1,1,1h2C3.552,9,4,8.552,4,8z"}})])},[],!1,null,"703e6494",null);e.a=component.exports},428:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgCgl4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIAoJeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIAoJdmVyc2lvbj0iMS4xIiAKCWlkPSJDYXBhXzEiIAoJeD0iMHB4IiAKCXk9IjBweCIgCgl3aWR0aD0iNTEycHgiIAoJaGVpZ2h0PSI1MTJweCIgCgl2aWV3Qm94PSIwIDAgNDg0LjUgNDg0LjUiIAoJc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg0LjUgNDg0LjU7IiAKCXhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiCj4KCTxnPgoJCTxnPgoJCQk8ZyBpZD0ibWljIj4KCQkJCTxwYXRoIAoJCQkJCWQ9Ik0yNDIuMjUsMzA2YzQzLjM1LDAsNzYuNS0zMy4xNSw3Ni41LTc2LjV2LTE1M2MwLTQzLjM1LTMzLjE1LTc2LjUtNzYuNS03Ni41Yy00My4zNSwwLTc2LjUsMzMuMTUtNzYuNSw3Ni41djE1MyAgICBDMTY1Ljc1LDI3Mi44NSwxOTguOSwzMDYsMjQyLjI1LDMwNnogTTM3Ny40LDIyOS41YzAsNzYuNS02My43NSwxMzAuMDUtMTM1LjE1LDEzMC4wNWMtNzEuNCwwLTEzNS4xNS01My41NS0xMzUuMTUtMTMwLjA1SDYzLjc1ICAgIGMwLDg2LjcsNjguODUsMTU4LjEsMTUzLDE3MC44NXY4NC4xNWg1MXYtODQuMTVjODQuMTUtMTIuNzUsMTUzLTg0LjE0OSwxNTMtMTcwLjg1SDM3Ny40TDM3Ny40LDIyOS41eiIgCgkJCQkJZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgCgkJCQkJY2xhc3M9ImFjdGl2ZS1wYXRoIiAKCQkJCQlkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCIgCgkJCQkJZmlsbD0iI0ZBRkFGOCIKCQkJCS8+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+IAo8L3N2Zz4K"},429:function(t,e,n){"use strict";var r=n(404);n.n(r).a},430:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".icon--microphone[data-v-20b24deb]{width:10rem}",""])},431:function(t,e,n){"use strict";var r=n(405);n.n(r).a},432:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".record__button__wrapper[data-v-553fe863]{width:100%;display:flex;justify-content:center;align-items:center}.record__button--outside[data-v-553fe863]{width:10rem;height:10rem;background-color:#fafcff}.record__button--inside[data-v-553fe863],.record__button--outside[data-v-553fe863]{display:flex;justify-content:center;align-items:center;border-radius:50%}.record__button--inside[data-v-553fe863]{width:5rem;height:5rem;background-color:#ff7989}.icon_microphone[data-v-553fe863]{padding-top:.5rem}.icon_microphone[data-v-553fe863] .icon--microphone{width:3rem}.active[data-v-553fe863]{background-color:#fafcff;border:.4rem solid #2f7db3}.icon_square[data-v-553fe863]{width:2rem;height:2rem;background-color:#2f7db3}",""])},433:function(t,e,n){"use strict";n(26);var r,o,c,d={startRecording:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){var e=new(window.AudioContext||window.webkitAudioContext)({sampleRate:22e3});o=t,c=e.createMediaStreamSource(t),(r=new WebAudioRecorder(c,{workerDir:"/record/",encoding:"mp3",numChannels:2})).setOptions({timeLimit:1200,mp3:{bitRate:192},encodeAfterRecord:!0}),r.startRecording()}).catch(function(t){console.error(t)})},stopRecording:function(){return new Promise(function(t){o.getAudioTracks()[0].stop(),r.finishRecording(),r.onComplete=function(e,n){t(n)}})}};e.a=d},435:function(t,e,n){var content=n(475);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(5).default)("204e3c84",content,!0,{sourceMap:!1})},448:function(t,e,n){"use strict";var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon_microphone__components"},[e("img",{staticClass:"icon--microphone",attrs:{src:n(428),alt:"icon-microphone"}})])}],o=(n(429),n(0)),c={components:{IconMicrophone:Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},r,!1,null,"20b24deb",null).exports},props:{isActive:{type:Boolean}},methods:{handleButtonClick:function(){this.$emit("buttonClick")}}},d=(n(431),Object(o.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"record__button__wrapper",on:{click:this.handleButtonClick}},[e("div",{staticClass:"record__button--outside"},[e("div",{staticClass:"record__button--inside",class:{active:this.isActive}},[this.isActive?this._e():e("icon-microphone",{staticClass:"icon_microphone"}),this._v(" "),this.isActive?e("div",[e("div",{staticClass:"icon_square"})]):this._e()],1)])])},[],!1,null,"553fe863",null));e.a=d.exports},451:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},474:function(t,e,n){"use strict";var r=n(435);n.n(r).a},475:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".record__container[data-v-662d4ee4]{width:100%;height:100vh;display:flex;text-align:center;flex-direction:column;align-content:center;justify-content:center;background-color:#707070}.record__timer[data-v-662d4ee4]{font-family:Unica One;font-size:3.5rem;color:#fafcff}.record__button--active[data-v-662d4ee4]{background-color:#2f7db3}.loading_icon[data-v-662d4ee4]{position:absolute;-webkit-animation:loading_icon-data-v-662d4ee4 5s linear infinite;animation:loading_icon-data-v-662d4ee4 5s linear infinite;left:59rem}@media only screen and (max-width:834px){.loading_icon[data-v-662d4ee4]{left:35.5rem}}@media only screen and (max-width:480px){.loading_icon[data-v-662d4ee4]{left:16rem}}@-webkit-keyframes loading_icon-data-v-662d4ee4{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes loading_icon-data-v-662d4ee4{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},502:function(t,e,n){"use strict";n.r(e);n(191),n(192),n(26);var r=n(451),o=(n(25),n(6)),c=n(8),d=n(16),l=n(448),f=n(416),h=n(433),m=n(19),v=d.c.storage().ref("audio"),w={head:function(){return{script:[{src:"/record/WebAudioRecorder.min.js"}]}},components:{RecordButton:l.a,IconLoading:f.a},filters:{zeroPadding:function(time){return("0"+time).slice(-2)}},data:function(){return{isActiveRecord:!1,isLoading:!1,isDisabled:!1,rawAudioData:null,previewAudioData:null,timerId:null,min:0,sec:0}},methods:Object(c.a)({},Object(m.b)("post",["addPostId","addAudioUrl"]),{handleRecord:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isActiveRecord){t.next=8;break}return clearInterval(this.timerId),t.next=4,this.stopRecording();case 4:return t.next=6,this.uploadAudioData(this.rawAudioData);case 6:return this.$router.push("/posts/new"),t.abrupt("return");case 8:return t.next=10,this.startRecording();case 10:this.isActiveRecord=!0,this.updateTimer();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateTimer:function(){var t=this;this.timerId=setInterval(function(){t.sec++,t.sec>=60&&(t.min++,t.sec=0)},1e3)},startRecording:function(){h.a.startRecording()},stopRecording:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.stopRecording();case 2:e=t.sent,this.rawAudioData=e,n=URL.createObjectURL(e),this.previewAudioData=n;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createId:function(){return Object(r.a)(Array(2)).reduce(function(t){return t+Math.random().toString(32).slice(-6).toString()},"")},uploadAudioData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(data){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoading=!0,!this.isDisabled){t.next=3;break}return t.abrupt("return");case 3:return this.isDisabled=!0,e=this.createId(),n=v.child(e),t.next=8,n.put(data).then(function(t){console.log("added firebase storage: ".concat(t.state,"!!"))});case 8:return t.next=10,n.getDownloadURL().then(function(t){r.addPostId(e),r.addAudioUrl(t),r.isLoading=!1,r.isDisabled=!1});case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},M=(n(474),n(0)),component=Object(M.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"record__container",class:{"record__button--active":t.isActiveRecord}},[t.isLoading?n("icon-loading",{staticClass:"loading_icon"}):t._e(),t._v(" "),n("div",{staticClass:"record__timer"},[t._v("\n    "+t._s(t._f("zeroPadding")(t.min))+":"+t._s(t._f("zeroPadding")(t.sec))+"\n  ")]),t._v(" "),n("record-button",{attrs:{"is-active":t.isActiveRecord},on:{buttonClick:t.handleRecord}})],1)},[],!1,null,"662d4ee4",null);e.default=component.exports}}]);